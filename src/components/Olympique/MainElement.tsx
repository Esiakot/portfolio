"use client";

import styles from "@/styles/Olympique/MainElement.module.css";
import { Genos } from "next/font/google";
import Image from "next/image";
import { useState, useEffect } from "react";

const genos = Genos({
  weight: "400",
  subsets: ["latin"],
});

const images = [
  "/green.webp",
  "/robi.webp",
  "/auba.webp",
  "/roley.webp",
  "/team.webp",
];

const getImageClass = (index: number) => {
  switch (images[index]) {
    case "/green.webp":
      return styles.imageGreen;
    case "/robi.webp":
      return styles.imageFlag;
    case "/auba.webp":
      return styles.imageAuba;
    case "/team.webp":
      return styles.imageTeam;
    case "/roley.webp":
      return styles.imageRoley;
  }
};

export default function MainElement() {
  const [index, setIndex] = useState(0);
  const [prevIndex, setPrevIndex] = useState(0);
  const [direction, setDirection] = useState<"left" | "right">("right");
  const [isTransitioning, setIsTransitioning] = useState(false);

  const goToNext = () => {
    if (isTransitioning) return;
    setIsTransitioning(true);
    setDirection("right");
    setPrevIndex(index);
    setIndex((i) => (i + 1) % images.length);
    setTimeout(() => setIsTransitioning(false), 800);
  };

  const goToPrev = () => {
    if (isTransitioning) return;
    setIsTransitioning(true);
    setDirection("left");
    setPrevIndex(index);
    setIndex((i) => (i - 1 + images.length) % images.length);
    setTimeout(() => setIsTransitioning(false), 800);
  };

  useEffect(() => {
    const interval = setInterval(() => {
      goToNext();
    }, 6000);

    return () => clearInterval(interval);
  }, [index, isTransitioning]);

  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      if (e.key === "ArrowRight") {
        goToNext();
      } else if (e.key === "ArrowLeft") {
        goToPrev();
      }
    };

    window.addEventListener("keydown", handleKeyDown);
    return () => window.removeEventListener("keydown", handleKeyDown);
  }, [index, isTransitioning]);

  return (
    <div className={`${styles.container} ${genos.className}`}>
      <div className={styles.headerContainer}>
        <div className={styles.headerTop}></div>
        <div className={styles.header}>
          <svg
            className={styles.logoOM}
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 160 210"
          >
            <path
              xmlns="http://www.w3.org/2000/svg"
              d="M75.78064,166.74042a53.65447,53.65447,0,0,1-38.37558-16.27234l17.48906-50.22754c1.64334,6.27827,5.13643,19.30124,5.13083,19.276l.7615,3.3969a39.403,39.403,0,0,1,1.37295,8.43319c0,3.66139-1.346,6.92506-5.53134,11.32524l.67679,2.01188a21.81182,21.81182,0,0,0,8.97677,2.65277c.90371,4.34211,5.98152,10.95359,9.54165,14.01,3.56659-3.05638,8.64636-9.66786,9.549-14.01a21.83,21.83,0,0,0,8.9793-2.65277l.67848-2.01188c-4.18644-4.40018-5.533-7.66385-5.533-11.32524a39.22521,39.22521,0,0,1,1.37267-8.43319l.76179-3.3969c-.00618.02524,3.48749-12.99773,5.13054-19.276l17.6349,49.99a53.68106,53.68106,0,0,1-38.61622,16.5099M20.90779,109.74714A57.56645,57.56645,0,0,1,44.56685,62.88367C43.21353,79.531,32.94712,109.2734,24.92314,131.14946a58.73068,58.73068,0,0,1-4.01535-21.40232M90.02091,54.70431a67.70813,67.70813,0,0,1-1.84051,10.677s-.77721,3.51778-.79656,3.59379c-.00758.02328-9.93069,39.91372-11.55859,46.1359-1.624-6.22216-11.54906-46.11262-11.55495-46.1359-.01374-.076-.79263-3.59379-.79263-3.59379a67.31014,67.31014,0,0,1-1.84612-10.70424,53.028,53.028,0,0,1,28.38936.0272m40.63176,55.04283a58.76871,58.76871,0,0,1-3.80752,20.85539c-8.08681-21.78911-18.35687-51.12088-19.74721-67.64257a57.57036,57.57036,0,0,1,23.55472,46.78718m4.37577,42.73536c-.44456-1.22738-.96232-2.62894-1.541-4.17355,9.4317-10.67927,15.04271-24.04808,15.04271-38.56181,0-24.956-16.58311-46.53783-40.67888-56.85642a54.61383,54.61383,0,0,1,5.08624-13.97689,32.98239,32.98239,0,0,1,2.73159-3.87146c.04263-.0446.28048-.28974.28048-.28974l-.02048-.02468a28.3038,28.3038,0,0,1,4.16906-4.0549l-.99571-2.32322c-4.84277,2.13333-15.05113,6.99546-21.32546,12.66761-3.01573-2.80677-8.6531-5.67692-12.82412-6.99742l-.78955,1.91287a4.23883,4.23883,0,0,1,.87931,1.14913l.03225.04459.032.04208a24.28848,24.28848,0,0,1,4.5822,10.41058,83.84335,83.84335,0,0,0-27.71929-.01206,24.23662,24.23662,0,0,1,4.58276-10.39852l.02973-.04208.02917-.04459a4.39392,4.39392,0,0,1,.87959-1.14913L66.704,34.02c-4.17187,1.3205-9.81092,4.19065-12.82692,6.99742-6.27126-5.67215-16.48466-10.53428-21.32351-12.66761l-.99542,2.32322a28.48615,28.48615,0,0,1,4.1699,4.0549l-.01936.02468s.23589.24514.2802.28974a33.1623,33.1623,0,0,1,2.7288,3.87147,54.67888,54.67888,0,0,1,5.08062,13.95C19.66862,63.17089,3.05522,84.76786,3.05522,109.74714c0,14.677,5.7361,28.18629,15.36077,38.92308-.52029,1.4038-.99093,2.68138-1.40156,3.81228A50.707,50.707,0,0,1,.36233,172.97662l.957,1.99562c17.62342-2.46907,23.63467-.62464,27.55634-.00393L33.618,161.34819a79.9445,79.9445,0,0,0,42.175,11.72716,79.89262,79.89262,0,0,0,42.46273-11.90863l4.8697,13.80552c3.92083-.62071,9.95844-2.46907,27.58354,0l.97215-1.99562a50.71616,50.71616,0,0,1-16.65267-20.49412"
              fill="#003049"
            />

            <path
              xmlns="http://www.w3.org/2000/svg"
              d="M75.82324,0,72.55789,10.14749H61.88282l8.65337,6.31978L67.30338,26.63832l8.61438-6.3007,8.67076,6.21572-3.32509-10.134,8.59476-6.27182H79.18508Z"
              fill="#003049"
            />

            <path
              xmlns="http://www.w3.org/2000/svg"
              d="M5.87494,188.3867H4.49385v6.66758H6.00059c1.25571,0,2.25983-.41539,2.25983-3.62465C8.26042,188.73646,7.23134,188.3867,5.87494,188.3867Zm5.34847,7.75051a7.27052,7.27052,0,0,1-4.87081,1.39567H0v-11.59H6.17645a9.92189,9.92189,0,0,1,4.1685.7155c1.98328.91465,2.86174,2.50918,2.86174,4.87167A5.33266,5.33266,0,0,1,11.22341,196.13721Zm8.71307-7.75051v2.36248h1.28067c1.53226,0,2.05872-.48355,2.05872-1.2644,0-.83161-.67736-1.09808-2.084-1.09808Zm3.89166,9.14617L21.9952,194.2908c-.67764-1.19878-1.07957-1.34744-2.05872-1.34744v4.5895h-4.4947v-11.59h6.02668c5.14709,0,6.80389,1.38052,6.80389,3.308,0,1.997-1.58107,3.01207-3.64008,3.24375a3.20543,3.20543,0,0,1,1.75721,1.24729c.57723.78085,2.059,2.92682,2.63708,3.791ZM40.275,191.66346c0-2.894-.8535-3.59184-2.78685-3.59184-2.03376,0-2.88811,1.41306-2.88811,3.62465,0,2.9599,1.07985,3.69252,2.93831,3.69252C39.44645,195.38879,40.275,194.63879,40.275,191.66346Zm-10.69667.36575c0-4.12363,3.41513-6.28528,8.03464-6.28528,5.95151,0,7.68459,3.00814,7.68459,5.5521,0,3.32733-1.58247,6.4359-7.83437,6.4359C32.39042,197.73193,29.57832,195.50492,29.57832,192.02921Zm17.954,5.5038v-11.59h4.59455v11.59Zm19.0827-9.12906H62.547V197.533H58.00263V188.404H53.93511V185.943h13.207Zm13.00575,2.49394a6.90866,6.90866,0,0,1-.32536-1.62986,7.59842,7.59842,0,0,1-.47766,1.8464l-.70345,1.89633h2.25983Zm2.56162,6.635-.90342-2.22729H77.13519l-.95448,2.22729H71.46079l5.625-11.59h4.66859l5.29911,11.59Zm18.73025-3.57468a2.67526,2.67526,0,0,1-.42549,1.912c-.72841.96458-2.68813,1.86154-6.15233,1.86154-2.76161,0-4.67-.49869-5.72488-1.44586-.65268-.63221-.85462-.91437-.85462-2.46094V185.943H92.2753v7.56652c0,1.06358.50262,1.7788,2.08368,1.7788,1.60828,0,2.06013-.59966,2.06013-1.728V185.943h4.49357Zm14.84051-1.19642h-1.65764v2.29264h1.707c1.1309,0,1.60632-.48131,1.60632-1.19681C117.40887,193.27566,117.13372,192.76183,115.75319,192.76183Zm-1.65764-4.37521v2.01245h1.78217c1.07984,0,1.45793-.49869,1.45793-1.09809,0-.59714-.4527-.91436-1.50787-.91436Zm2.61155,9.14646h-7.10625V185.94279h7.75809c2.53638,0,4.59594.7155,4.59594,2.84378,0,1.04648-.65324,2.14428-2.58742,2.55966,1.70812.29983,3.21486,1.21421,3.21486,2.61212C122.58232,196.06924,120.69974,197.53308,116.7071,197.53308Zm21.14212-3.57483a2.67171,2.67171,0,0,1-.42717,1.912c-.729.96458-2.68728,1.86154-6.1515,1.86154-2.763,0-4.67112-.49869-5.72432-1.44586-.65463-.63221-.85462-.91437-.85462-2.46094V185.943h4.51994v7.56652c0,1.06358.50234,1.7788,2.08368,1.7788,1.60688,0,2.059-.59966,2.059-1.728V185.943h4.495Zm14.46226-5.5543h-4.06724V197.533h-4.54518V188.404h-4.06752V185.943h13.20781Z"
              fill="#003049"
            />
          </svg>
        </div>
      </div>

      <div className={styles.carousel}>
        {isTransitioning && (
          <Image
            className={`${styles.image} ${getImageClass(prevIndex)} ${
              styles.imagePrev
            }`}
            src={images[prevIndex]}
            alt="Olympique Previous"
            fill
            priority
          />
        )}
        <Image
          className={`${styles.image} ${getImageClass(index)} ${
            isTransitioning
              ? direction === "right"
                ? styles.slideRight
                : styles.slideLeft
              : ""
          }`}
          src={images[index]}
          alt="Olympique Main"
          fill
          priority
        />

        <button
          className={`${styles.navButton} ${styles.navLeft}`}
          onClick={goToPrev}
        >
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="3"
          >
            <path d="M15 18l-6-6 6-6" />
          </svg>
        </button>
        <button
          className={`${styles.navButton} ${styles.navRight}`}
          onClick={goToNext}
        >
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="3"
          >
            <path d="M9 18l6-6-6-6" />
          </svg>
        </button>
      </div>

      <div className={styles.text}></div>

      <div className={styles.bottom}>
        <svg
          className={styles.logo}
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 240.26566 185.20833"
          version="1.1"
          id="svg5"
        >
          <defs id="defs2" />
          <g id="layer1" transform="translate(-6.5632034,-28.586736)" />
          <g
            viewBox="0 0 48 37"
            id="puma-logo"
            transform="matrix(5.0055816,0,0,5.0055816,0.0019023,5.8406749e-4)"
          >
            <path
              fill="#003049"
              d="m 47.689,0.517 c -0.834,-1.066 -2.291,-0.213 -2.933,0.16 -4.569,2.692 -5.243,7.432 -6.834,10.154 -1.253,2.178 -3.304,3.779 -5.159,3.903 -1.373,0.098 -2.861,-0.167 -4.338,-0.81 -3.613,-1.562 -5.56,-3.583 -6.034,-3.94 -0.973,-0.739 -8.459,-8.03 -14.559,-8.327 0,0 -0.744,-1.5 -0.93,-1.526 C 6.457,0.08 6,1.033 5.669,1.133 5.369,1.238 4.844,0.109 4.539,0.158 4.233,0.2 3.936,1.33 3.34,1.913 2.901,2.338 2.367,2.311 2.065,2.839 1.961,3.031 1.997,3.369 1.879,3.679 1.626,4.32 0.777,4.387 0.769,5.073 0.769,5.835 1.483,5.98 2.107,6.511 2.603,6.936 2.637,7.236 3.216,7.435 3.731,7.611 4.48,7.061 5.144,7.258 5.697,7.421 6.229,7.537 6.348,8.104 6.456,8.617 6.348,9.42 5.666,9.33 5.444,9.3 4.472,8.982 3.271,9.11 1.821,9.264 0.166,9.728 0.004,11.33 c -0.083,0.895 1.028,1.942 2.11,1.733 0.742,-0.143 0.392,-1.013 0.797,-1.433 0.535,-0.541 3.545,1.888 6.344,1.888 1.186,0 2.063,-0.3 2.935,-1.21 0.078,-0.057 0.185,-0.203 0.31,-0.218 0.113,0.015 0.324,0.128 0.39,0.175 2.262,1.793 3.967,5.399 12.26,5.441 1.164,0.014 2.498,0.558 3.591,1.553 0.96,0.866 1.528,2.251 2.075,3.65 0.836,2.106 2.322,4.139 4.584,6.407 0.119,0.135 1.98,1.561 2.119,1.666 0.025,0.021 0.168,0.334 0.106,0.51 -0.039,1.38 -0.245,5.34 2.731,5.506 0.731,0.04 0.549,-0.463 0.549,-0.82 -0.01,-0.683 -0.129,-1.371 0.226,-2.08 0.507,-0.957 -1.051,-1.418 -1.017,-3.513 0.037,-1.567 -1.291,-1.302 -1.969,-2.498 -0.381,-0.687 -0.736,-1.065 -0.699,-1.894 0.145,-4.76 -1.034,-7.896 -1.61,-8.654 -0.455,-0.587 -0.847,-0.806 -0.414,-1.078 2.481,-1.632 3.05,-3.15 3.05,-3.15 1.32,-3.081 2.512,-5.89 4.15,-7.138 0.332,-0.241 1.177,-0.88 1.703,-1.12 1.527,-0.725 2.346,-1.156 2.777,-1.576 0.711,-0.675 1.27,-2.107 0.588,-2.96 z"
              id="path167"
            />
          </g>
        </svg>
        Partenaire majeur
        <svg
          className={styles.logo}
          xmlns="http://www.w3.org/2000/svg"
          version="1.2"
          baseProfile="tiny"
          x="0px"
          y="0px"
          viewBox="0 0 536 327"
        >
          <g id="CMA_CGM">
            <g>
              <g>
                <path
                  fill="#003049"
                  d="M300.5,35.8c3.8-3,20.5-17.9,28.8-28.1c0.6-0.8,0.2-1.9-0.7-2.2c-43.7-12.7-176-0.4-238.8,94.7     c-0.9,1.3-0.7,1.7,0.3,2.5c21.9-35.5,71.6-63.4,131.7-69.2c24.7-2.4,49.9-0.4,74.7,3.9C298.9,37.6,298.8,37.2,300.5,35.8z"
                />
                <g>
                  <g>
                    <path
                      fill="#003049"
                      d="M239.3,201.2h17.5l-30.9-75h-22.8l-30.9,75h17l5-13h40L239.3,201.2z M200.3,174.2l13.9-36.3l13.9,36.3       H200.3z"
                    />
                    <path
                      fill="#003049"
                      d="M127.5,193.2l19.1-31.9c0.7-1.2,4.4-7.6,5.6-10.1h0.2c-0.2,2.8-0.2,7.8-0.2,10.1v39.9h16v-75h-15.3       l-24.3,40.2l-24.3-40.2H86.2v75h16v-39.9c0-2.3-0.1-7.2-0.2-10.1h0.2c1.2,2.4,4.9,8.9,5.6,10.1l19.1,31.9L127.5,193.2       L127.5,193.2z"
                    />
                    <path
                      fill="#003049"
                      d="M492,193.2l19.5-31.9c0.7-1.2,4.5-7.6,5.7-10.1h0.2c-0.2,2.8-0.2,7.8-0.2,10.1v39.9h16v-75h-16.3       l-24.3,40.2l-24.3-40.2h-18.1v75h16v-39.9c0-2.3-0.1-7.2-0.2-10.1h0.2c1.2,2.4,5,8.9,5.7,10.1l19.5,31.9L492,193.2L492,193.2z"
                    />
                    <path
                      fill="#003049"
                      d="M77.2,179.2h-17v0.5c0,6.1-3.3,7.5-10.6,7.5H33.4c-12.3,0-14.2-1.5-14.2-15.8V155       c0-13.3,1.8-14.8,13.9-14.8H49c7.2,0,10.4,1.3,10.4,7h18.9c0-16.4-6.5-22-26.9-22H30.2c-19.4,0-27,7.3-27,26.2v23.9       c0,18.5,7.5,25.8,26.6,25.8h20.9c20.2,0,26.5-5.5,26.5-21.6V179.2z"
                    />
                    <path
                      fill="#003049"
                      d="M354.2,179.2h-17v0.5c0,6.1-3.3,7.5-10.6,7.5h-16.2c-12.3,0-14.2-1.5-14.2-15.8V155       c0-13.3,1.8-14.8,13.9-14.8H326c7.2,0,10.4,1.3,10.4,7h18.9c0-16.4-6.5-22-26.9-22h-21.2c-19.4,0-27,7.4-27,26.3v23.9       c0,18.5,7.5,25.7,26.6,25.7h20.9c20.2,0,26.5-5.5,26.5-21.5V179.2z"
                    />
                    <path
                      fill="#003049"
                      d="M423.2,172.2v7.9c0,5.8-3.2,7.1-10.5,7.1h-19.4c-12.2,0-14-1.4-14-15V155c0-13.3,1.8-14.8,13.9-14.8       h18.5c7.2,0,10.4,1.3,10.4,7h18.9c0-16.4-6.5-22-26.9-22h-23.7c-19.4,0-27,7.4-27,26.3V175c0,18.8,7.5,26.2,26.4,26.2h23.2       c20.1,0,26.3-5.6,26.3-21.9v-20.1h-38v13H423.2z"
                    />
                  </g>
                </g>
                <path
                  fill="#003049"
                  d="M235.5,290.2c-3.8,3-20.5,17.9-28.8,28.1c-0.6,0.8-0.2,1.9,0.7,2.2c43.7,12.7,176,0.3,238.8-94.8     c0.9-1.3,0.7-1.7-0.3-2.5c-21.9,35.5-71.6,63.4-131.7,69.2c-24.7,2.4-49.9,0.4-74.7-3.9C237.1,288.3,237.2,288.7,235.5,290.2z"
                />
              </g>
            </g>
          </g>
          <g id="ANL"></g>
          <g id="Calque_3"></g>
          <g id="Calque_4"></g>
          <g id="Calque_4_-_copie" display="none">
            <g display="inline">
              <g>
                <g>
                  <g>
                    <g>
                      <path
                        fill="#003049"
                        d="M-61.4,88.2c0,0,44-26.3,96.5-9.2c0,0-22.8,33.9-28.6,81.6c0,0-32.8-20.3-82-1L-61.4,88.2z"
                      />
                    </g>
                  </g>
                  <polygon
                    fill="#003049"
                    points="-14.1,102.6 8.5,100.9 -11.6,115.1     "
                  />
                  <polygon
                    fill="#003049"
                    points="-7.4,122 4,121.1 -4.4,115.3     "
                  />
                </g>
              </g>
              <g>
                <path
                  fill="#003049"
                  d="M-34.3,253.3h-16l27.8-67.7h20.6L26,253.3H9.6l-4.4-11.4h-35L-34.3,253.3z M-24.9,229H0.2l-12.6-32.7     L-24.9,229z"
                />
                <path
                  fill="#003049"
                  d="M83.4,253.3l-30.7-38.2c-1.6-2-5-6.3-6.5-9h-0.2c0.2,2.5,0.3,7,0.3,9v38.2H32.3v-67.7h14.4l30.7,38.2     c1.7,2,5,6.3,6.6,9h0.2c-0.3-2.5-0.4-7-0.4-9v-38.2h13.9v67.7H83.4z"
                />
                <path
                  fill="#003049"
                  d="M120,253.3h-16l27.8-67.7h20.6l27.8,67.7h-16.4l-4.4-11.4h-35L120,253.3z M129.4,229h25.1l-12.6-32.7     L129.4,229z"
                />
                <path
                  fill="#003049"
                  d="M246.7,185.6l-26.4,67.7h-20.6l-26.5-67.7h16.4l20.6,56.9l20.5-56.9H246.7z"
                />
              </g>
            </g>
          </g>
          <g id="Calque_6"></g>
        </svg>{" "}
      </div>
    </div>
  );
}
